(window.webpackJsonp=window.webpackJsonp||[]).push([[17],{121:function(e,t,n){"use strict";var r=n(0),a=n(4),o=n(5),s={login:function(e,t){var n={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e,password:t})};return fetch("/api/user/login",n).then(c).then(function(e){return localStorage.setItem("user",JSON.stringify({token:e.user.token})),e.user})},logout:i,sendVerificationEmail:function(e){var t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e})};return fetch("/api/user/sendVerificationEmail/",t).then(c)},sendforgotPasswordEmail:function(e){var t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({email:e})};return fetch("/api/user/sendforgotPasswordEmail/",t).then(c)},register:function(e){var t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)};return fetch("/api/user/signup/",t).then(c)},getUserData:function(e){var t={method:"POST",headers:{Authorization:JSON.parse(localStorage.getItem("user")).token,"Content-Type":"application/json"},body:JSON.stringify(Object(r.a)({},e))};return fetch("/api/user/getUserData",t).then(c).then(function(e){return e})},resetPassword:function(e){var t={method:"POST",headers:{Authorization:"Bearer "+e.jwt,"Content-Type":"application/json"},body:JSON.stringify(Object(r.a)({},e))};return fetch("/api/user/passwordreset",t).then(u).then(function(e){return e})},updateUser:function(e){delete e.isDisabled;var t={method:"POST",headers:{Authorization:JSON.parse(localStorage.getItem("user")).token,"Content-Type":"application/json"},body:JSON.stringify(e)};return fetch("/api/user/updateUser",t).then(c).then(function(e){return localStorage.setItem("user",JSON.stringify({token:e.token})),e})},followUser:function(e){var t={method:"POST",headers:{Authorization:JSON.parse(localStorage.getItem("user")).token,"Content-Type":"application/json"},body:JSON.stringify({userId:e})};return fetch("/api/user/followUser",t).then(c).then(function(e){return e})},getUserProfileData:function(e){var t={method:"POST",headers:{Authorization:JSON.parse(localStorage.getItem("user")).token,"Content-Type":"application/json"},body:JSON.stringify({username:e.trim(),profilePage:!0})};return fetch("/api/user/getProfilePageData",t).then(c).then(function(e){return e})},getPosts:function(e){var t={method:"POST",headers:{Authorization:JSON.parse(localStorage.getItem("user")).token,"Content-Type":"application/json"},body:JSON.stringify(Object(r.a)({},e))};return fetch("/api/user/getPosts",t).then(c).then(function(e){return e})},getUserProfileFollowers:function(e){var t={method:"POST",headers:{Authorization:JSON.parse(localStorage.getItem("user")).token,"Content-Type":"application/json"},body:JSON.stringify({userId:e})};return fetch("/api/user/getUserProfileFollowers",t).then(c).then(function(e){return e})},getUserProfileFollowings:function(e){var t={method:"POST",headers:{Authorization:JSON.parse(localStorage.getItem("user")).token,"Content-Type":"application/json"},body:JSON.stringify({userId:e})};return fetch("/api/user/getUserProfileFollowings",t).then(c).then(function(e){return e})},getNewUsers:function(e){var t={method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(Object(r.a)({},e))};return fetch("/api/user/getNewUsers",t).then(c).then(function(e){return e})}};function i(){localStorage.removeItem("user")}function c(e){return e.text().then(function(t){var n=t&&JSON.parse(t);if(!e.ok){401===e.status&&(i(),window.location.reload(!0));var r=n&&n.message||e.statusText;return Promise.reject(r)}return n})}function u(e){return e.text().then(function(t){var n=t&&JSON.parse(t);if(!e.ok){e.status;var r=n&&n.message||e.statusText;return Promise.reject(r)}return n})}var l=n(31),p=n(16);n.d(t,"a",function(){return f});var f={login:function(e,t){return function(n){var r;n((r={email:e},{type:a.a.LOGIN_REQUEST,user:r})),s.login(e,t).then(function(e){n(function(e){return{type:a.a.LOGIN_SUCCESS,user:e}}(e.token)),n({type:a.a.GETUSER_SUCCESS,user:e}),p.a.push("/")},function(e){n(function(e){return{type:a.a.LOGIN_FAILURE,error:e}}(e.toString())),n(l.a.error(e.toString()))})}},logout:function(){return s.logout(),function(e){e({type:a.a.LOGOUT})}},register:function(e){return function(t){t(function(e){return{type:a.a.REGISTER_REQUEST,user:e}}(e)),s.register(e).then(function(e){var n;t({type:a.a.REGISTER_SUCCESS,user:n}),p.a.push("/login"),t(l.a.success(e.message))},function(e){t(function(e){return{type:a.a.REGISTER_FAILURE,error:e}}(e.toString())),t(l.a.error(e.toString()))})}},sendVerificationEmail:function(e){return function(t){s.sendVerificationEmail(e).then(function(e){t(l.a.success(e.message))},function(e){t(l.a.error(e))})}},getUserData:function(e){return function(t){t({type:a.a.GETUSER_REQUEST}),s.getUserData(e).then(function(e){var n;e.user.posts&&e.user.posts.forEach(function(e){return t({type:o.a.INIT_COMMENT,postId:e._id})}),t((n=e.user,{type:a.a.GETUSER_SUCCESS,user:n}))},function(e){t(function(e){return{type:a.a.GETUSER_FAILURE,error:e}}(e.toString())),t(l.a.error(e.toString()))})}},getUserProfileFollowers:function(e){return function(t){s.getUserProfileFollowers(e).then(function(e){var n;t((n=e.users[0].followers,{type:a.a.GET_USER_PROFILE_FOLLOWERS,users:n}))},function(e){console.log(e)})}},getUserProfileFollowings:function(e){return function(t){s.getUserProfileFollowings(e).then(function(e){var n;t((n=e.users[0].following,{type:a.a.GET_USER_PROFILE_FOLLOWINGS,users:n}))},function(e){console.log(e)})}},getFollowers:function(e){return function(t){s.getUserProfileFollowers(e).then(function(e){var n;t((n=e.users[0].followers,{type:a.a.GET_USER_FOLLOWERS,users:n}))},function(e){console.log(e)})}},getPosts:function(e){return function(t){s.getPosts(e).then(function(e){var n;e.posts.forEach(function(e){return t({type:o.a.INIT_COMMENT,postId:e._id})}),t((n=e.posts,{type:a.a.GET_POSTS,posts:n}))},function(e){t(l.a.error(e))})}},getUserPosts:function(e){return function(t){s.getPosts(e).then(function(e){var n;e.posts.forEach(function(e){return t({type:o.a.INIT_COMMENT,postId:e._id})}),t((n=e.posts,{type:a.a.GET_USER_PROFILE_POSTS,posts:n}))},function(e){t(l.a.error(e))})}},getFollowings:function(e){return function(t){s.getUserProfileFollowings(e).then(function(e){var n;t((n=e.users[0].following,{type:a.a.GET_USER_FOLLOWINGS,users:n}))},function(e){console.log(e)})}},updateUserData:function(e){return function(t){t({type:a.a.USER_UPDATE_REQUEST}),s.updateUser(e).then(function(e){var n;t((n=e.user,{type:a.a.USER_UPDATE_SUCCESS,user:n}))},function(e){t(function(e){return{type:a.a.USER_UPDATE_FAILURE,error:e}}(e.toString()))})}},followUser:function(e){return function(t){s.followUser(e).then(function(e){"followed"===e.action?t({type:a.a.FOLLOW_USER,user:e}):t({type:a.a.UNFOLLOW_USER,user:e})},function(e){console.log(e)})}},sendforgotPasswordEmail:function(e){return function(t){s.sendforgotPasswordEmail(e).then(function(e){t(l.a.success(e.message))},function(e){t(l.a.error(e))})}},getUserProfileData:function(e){return function(t){t({type:a.a.GET_USERPROFILE_DATA_REQUEST}),s.getUserProfileData(e).then(function(e){if(e.user.loggedInUser)return p.a.push("/profile");var n;document.title="@"+e.user.username+" | Homemade Arcade",t((n=e,{type:a.a.GET_USERPROFILE_DATA,user:n})),e.user.posts&&e.user.posts.forEach(function(e){return t({type:o.a.INIT_COMMENT,postId:e._id})})},function(e){console.log(e),t({type:a.a.GET_USERPROFILE_DATA_FAILURE}),t(l.a.error(e.toString()))})}},getNewUsers:function(e){return function(t){e.initialFetch||t({type:a.a.GET_NEW_USERS_REQUEST}),s.getNewUsers(e).then(function(n){var o;t((o=Object(r.a)({},n,e),{type:a.a.GET_NEW_USERS_SUCCESS,data:o}))},function(e){console.log(e)})}},resetPassword:function(e){return function(n){n({type:a.a.PASSWORD_RESET_REQUEST}),s.resetPassword(e).then(function(e){n(l.a.success(e.message)),n(t())},function(e){n(l.a.error(e)),n(t())})};function t(){return{type:a.a.PASSWORD_RESET_RESPONSE}}}}},126:function(e,t,n){"use strict";n.d(t,"a",function(){return s});var r=n(1),a=n.n(r),o=n(271);function s(e){var t=e.alert,n=t.type,r=t.message;return"success"===n?a.a.createElement(o.a,{success:!0,header:"Success",content:r}):"error"===n?a.a.createElement(o.a,{error:!0,header:"Error",content:r}):null}},271:function(e,t,n){"use strict";var r=n(61),a=n.n(r),o=n(67),s=n.n(o),i=n(70),c=n.n(i),u=n(71),l=n.n(u),p=n(68),f=n.n(p),h=n(72),d=n.n(h),m=n(74),g=n.n(m),y=n(66),E=n.n(y),S=n(91),O=n.n(S),b=(n(84),n(62)),v=n.n(b),w=(n(2),n(1)),T=n.n(w),N=n(259),P=n(460),U=n(461),j=n(60),R=n(476),_=n(305);function C(e){var t=e.children,n=e.className,r=e.content,o=v()("content",n),s=Object(P.a)(C,e),i=Object(U.a)(C,e);return T.a.createElement(i,a()({},s,{className:o}),j.a.isNil(t)?r:t)}C.handledProps=["as","children","className","content"],C.propTypes={};var I=C;function F(e){var t=e.children,n=e.className,r=e.content,o=v()("header",n),s=Object(P.a)(F,e),i=Object(U.a)(F,e);return T.a.createElement(i,a()({},s,{className:o}),j.a.isNil(t)?r:t)}F.handledProps=["as","children","className","content"],F.propTypes={},F.create=Object(R.f)(F,function(e){return{content:e}});var L=F,k=n(83),G=n.n(k);function A(e){var t=e.children,n=e.className,r=e.content,o=v()("content",n),s=Object(P.a)(A,e),i=Object(U.a)(A,e);return T.a.createElement(i,a()({},s,{className:o}),j.a.isNil(t)?r:t)}A.handledProps=["as","children","className","content"],A.propTypes={},A.defaultProps={as:"li"},A.create=Object(R.f)(A,function(e){return{content:e}});var D=A;function J(e){var t=e.children,n=e.className,r=e.items,o=v()("list",n),s=Object(P.a)(J,e),i=Object(U.a)(J,e);return T.a.createElement(i,a()({},s,{className:o}),j.a.isNil(t)?G()(r,D.create):t)}J.handledProps=["as","children","className","items"],J.propTypes={},J.defaultProps={as:"ul"},J.create=Object(R.f)(J,function(e){return{items:e}});var z=J;n.d(t,"a",function(){return q});var q=function(e){function t(){var e,n;s()(this,t);for(var r=arguments.length,a=new Array(r),o=0;o<r;o++)a[o]=arguments[o];return n=l()(this,(e=f()(t)).call.apply(e,[this].concat(a))),E()(g()(g()(n)),"handleDismiss",function(e){var t=n.props.onDismiss;t&&t(e,n.props)}),n}return d()(t,e),c()(t,[{key:"render",value:function(){var e=this.props,n=e.attached,r=e.children,o=e.className,s=e.color,i=e.compact,c=e.content,u=e.error,l=e.floating,p=e.header,f=e.hidden,h=e.icon,d=e.info,m=e.list,g=e.negative,y=e.onDismiss,E=e.positive,S=e.size,b=e.success,w=e.visible,C=e.warning,F=v()("ui",s,S,Object(N.a)(i,"compact"),Object(N.a)(u,"error"),Object(N.a)(l,"floating"),Object(N.a)(f,"hidden"),Object(N.a)(h,"icon"),Object(N.a)(d,"info"),Object(N.a)(g,"negative"),Object(N.a)(E,"positive"),Object(N.a)(b,"success"),Object(N.a)(w,"visible"),Object(N.a)(C,"warning"),Object(N.b)(n,"attached"),"message",o),k=y&&T.a.createElement(_.a,{name:"close",onClick:this.handleDismiss}),G=Object(P.a)(t,this.props),A=Object(U.a)(t,this.props);return j.a.isNil(r)?T.a.createElement(A,a()({},G,{className:F}),k,_.a.create(h,{autoGenerateKey:!1}),(!O()(p)||!O()(c)||!O()(m))&&T.a.createElement(I,null,L.create(p,{autoGenerateKey:!1}),z.create(m,{autoGenerateKey:!1}),Object(R.d)(c,{autoGenerateKey:!1}))):T.a.createElement(A,a()({},G,{className:F}),k,r)}}]),t}(w.Component);E()(q,"Content",I),E()(q,"Header",L),E()(q,"List",z),E()(q,"Item",D),E()(q,"handledProps",["as","attached","children","className","color","compact","content","error","floating","header","hidden","icon","info","list","negative","onDismiss","positive","size","success","visible","warning"]),q.propTypes={}},292:function(e,t,n){"use strict";var r=n(1),a=n.n(r),o=n(2),s=n.n(o),i=n(11),c=n.n(i),u=n(13),l=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e};function p(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!==typeof t&&"function"!==typeof t?e:t}var f=function(e){return!!(e.metaKey||e.altKey||e.ctrlKey||e.shiftKey)},h=function(e){function t(){var n,r;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t);for(var a=arguments.length,o=Array(a),s=0;s<a;s++)o[s]=arguments[s];return n=r=p(this,e.call.apply(e,[this].concat(o))),r.handleClick=function(e){if(r.props.onClick&&r.props.onClick(e),!e.defaultPrevented&&0===e.button&&!r.props.target&&!f(e)){e.preventDefault();var t=r.context.router.history,n=r.props,a=n.replace,o=n.to;a?t.replace(o):t.push(o)}},p(r,n)}return function(e,t){if("function"!==typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}(t,e),t.prototype.render=function(){var e=this.props,t=(e.replace,e.to),n=e.innerRef,r=function(e,t){var n={};for(var r in e)t.indexOf(r)>=0||Object.prototype.hasOwnProperty.call(e,r)&&(n[r]=e[r]);return n}(e,["replace","to","innerRef"]);c()(this.context.router,"You should not use <Link> outside a <Router>"),c()(void 0!==t,'You must specify the "to" property');var o=this.context.router.history,s="string"===typeof t?Object(u.b)(t,null,null,o.location):t,i=o.createHref(s);return a.a.createElement("a",l({},r,{onClick:this.handleClick,href:i,ref:n}))},t}(a.a.Component);h.propTypes={onClick:s.a.func,target:s.a.string,replace:s.a.bool,to:s.a.oneOfType([s.a.string,s.a.object]).isRequired,innerRef:s.a.oneOfType([s.a.string,s.a.func])},h.defaultProps={replace:!1},h.contextTypes={router:s.a.shape({history:s.a.shape({push:s.a.func.isRequired,replace:s.a.func.isRequired,createHref:s.a.func.isRequired}).isRequired}).isRequired},t.a=h},808:function(e,t,n){"use strict";n.r(t),n.d(t,"default",function(){return v});var r=n(6),a=n(0),o=n(24),s=n(25),i=n(27),c=n(26),u=n(28),l=n(34),p=n(1),f=n.n(p),h=n(292),d=n(18),m=n(271),g=n(817),y=n(821),E=n(305),S=n(121),O=n(126),b=function(e){function t(e){var n;return Object(o.a)(this,t),(n=Object(i.a)(this,Object(c.a)(t).call(this,e))).componentDidMount=function(){document.title="Register | Homemade Arcade"},n.handleChange=function(e){var t=e.target,o=t.name,s=t.value,i=n.state.user;n.setState({user:Object(a.a)({},i,Object(r.a)({},o,s))})},n.handleRetypePassword=function(e){var t=e.target,o=t.name,s=t.value,i=n.state.user;s!==n.state.user.password?n.setState({user:Object(a.a)({},i,Object(r.a)({},o,s)),retTypePasswordError:!0}):n.setState({user:Object(a.a)({},i,Object(r.a)({},o,s)),retTypePasswordError:!1})},n.state={user:{firstName:"",lastName:"",username:"",email:"",password:"",retypepassword:""},submitted:!1,retTypePasswordError:!1},n.handleChange=n.handleChange.bind(Object(l.a)(Object(l.a)(n))),n.handleSubmit=n.handleSubmit.bind(Object(l.a)(Object(l.a)(n))),n}return Object(u.a)(t,e),Object(s.a)(t,[{key:"handleSubmit",value:function(e){e.preventDefault(),this.setState({submitted:!0});var t=this.state.user,n=this.props.dispatch;t.firstName&&t.lastName&&t.username&&t.password&&t.retypepassword&&!this.state.retTypePasswordError&&n(S.a.register(t))}},{key:"render",value:function(){var e=this.props,t=e.registering,n=e.alert,r=this.state,a=r.user,o=r.submitted,s=r.retTypePasswordError;return f.a.createElement("div",{className:"form-centered"},f.a.createElement(m.a,{size:"large",attached:!0,header:"Homemade Arcade",content:"Fill out the form below to sign-up for a new account. (Do not use real credentials)"}),f.a.createElement(g.a,{className:"attached fluid segment",size:"large",success:"success"===n.type,error:"error"===n.type,name:"form",onSubmit:this.handleSubmit},f.a.createElement(g.a.Group,{widths:"equal"},f.a.createElement(g.a.Input,{required:!0,label:"First Name",placeholder:"First Name",type:"text",name:"firstName",value:a.firstName,error:!(!o||a.firstName),onChange:this.handleChange}),f.a.createElement(g.a.Input,{required:!0,label:"Last Name",placeholder:"Last Name",type:"text",name:"lastName",value:a.lastName,error:!(!o||a.lastName),onChange:this.handleChange})),f.a.createElement(g.a.Group,{widths:"equal"},f.a.createElement(g.a.Input,{required:!0,autoCapitalize:"none",label:"Username",placeholder:"Username",type:"text",name:"username",value:a.username,error:!(!o||a.username),onChange:this.handleChange}),f.a.createElement(g.a.Input,{required:!0,label:"Email",placeholder:"Email",type:"email",name:"email",value:a.email,error:!(!o||a.email),onChange:this.handleChange})),f.a.createElement(g.a.Input,{required:!0,label:"Password",placeholder:"Password",type:"password",name:"password",value:a.password,error:!(!o||a.password),onChange:this.handleChange}),f.a.createElement(g.a.Input,{required:!0,label:"Re-type password",placeholder:"Re-type password",type:"password",name:"retypepassword",value:a.retypepassword,error:!(!o||a.retypepassword)||s,onChange:this.handleRetypePassword}),f.a.createElement(y.a,{size:"large",content:"Sign up",icon:"signup",fluid:!0,primary:!0,disabled:!(!s&&""!==a.retypepassword&&""!==a.password&&""!==a.email&&""!==a.firstName&&""!==a.lastName&&""!==a.username),loading:!!t}),n.type?f.a.createElement(O.a,{alert:n}):null),f.a.createElement(m.a,{size:"large",attached:"bottom",warning:!0},f.a.createElement(E.a,{name:"help"}),"Already signed up?\xa0",f.a.createElement(h.a,{to:"/login"},"Login here"),"\xa0instead."))}}]),t}(f.a.Component),v=Object(d.b)(function(e){return{registering:e.registration.registering,alert:e.alert}})(b)}}]);